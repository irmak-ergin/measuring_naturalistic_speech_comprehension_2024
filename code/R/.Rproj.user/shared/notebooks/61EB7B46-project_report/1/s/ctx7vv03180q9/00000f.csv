"0","# Organize the data csv files"
"0",""
"0","# Loop through each participant ID"
"0","for (part_id in participant_ids) {"
"0","  # Define the path to the participant's raw data CSV"
"0","  raw_data_path <- file.path(organized_data_path, "
"0","                             part_id, "
"0","                             paste0(part_id, ""_raw_data.csv""))"
"0","  "
"0"," # Read the CSV for each participant (if it exists)"
"0","if (file.exists(raw_data_path)) {"
"0","  df.raw <- read_csv(raw_data_path) %>%"
"0","    filter(!wav_file %in% c(""Someday_trial_condition.wav"", "
"0","                            ""Someday_trial_condition-4x.wav"")) %>%"
"0","    mutate(index = row_number()) %>%"
"0","    select(index, participant, wav_file, old_name, segment_text, question, "
"0","           C1, C2, C3, C4, C_correct, duration, `Experimen_audio.started`, "
"0","           A.numClicks, B.numClicks, C.numClicks, D.numClicks, slider.response, "
"0","           summary, `skip_button_exp.numClicks`, `textbox.text`) %>%"
"0","    group_by(wav_file) %>%"
"0","    summarise("
"0","      index = first(index), "
"0","      participant = first(participant), "
"0","      old_name = first(old_name),"
"0","      segment_text = first(segment_text),"
"0","      question = first(question),"
"0","      C1 = first(C1),"
"0","      C2 = first(C2),"
"0","      C3 = first(C3),"
"0","      C4 = first(C4),"
"0","      C_correct = first(C_correct),"
"0","      duration = first(duration),"
"0","      `Experimen_audio.started` = first(`Experimen_audio.started`),"
"0","      summary = first(summary),"
"0","      textbox.text = first(textbox.text),"
"0","      A.numClicks = max(A.numClicks, na.rm = TRUE),"
"0","      B.numClicks = max(B.numClicks, na.rm = TRUE),"
"0","      C.numClicks = max(C.numClicks, na.rm = TRUE),"
"0","      D.numClicks = max(D.numClicks, na.rm = TRUE),"
"0","      likert_response = max(slider.response, na.rm = TRUE),"
"0","      summary_skipped = if_else(is.infinite(max(`skip_button_exp.numClicks`, "
"0","                                                na.rm = TRUE)), "
"0","                                NA_real_, max(`skip_button_exp.numClicks`, "
"0","                                              na.rm = TRUE)),"
"0","      .groups = 'drop'"
"0","    ) %>%"
"0","    arrange(index) %>%"
"0","    mutate(index = row_number()) "
"0","  "
"0","  #  Assign processed data of each participant to a new df"
"0","  assign(paste0(""df.raw.merged_"", part_id), df.raw, envir = .GlobalEnv)"
"0","}"
"0",""
"0","  }"
"0",""
"0","# Sanity check"
"0","# how many rows do we have- should be 150"
"0","nrow(df.raw.merged_p_1)"
"1","[1]"
"1"," 150"
"1","
"
"0","# how many summary=yes do we have? - should be 48"
"0","summary_yes_count <- df.raw.merged_p_1 %>%"
"0","  filter(summary == ""yes"") %>%"
"0","  nrow()"
"0","print(summary_yes_count)"
"1","[1]"
"1"," 48"
"1","
"
