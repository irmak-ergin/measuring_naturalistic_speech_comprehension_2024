"0","# Organize the data csv files"
"0",""
"0","# Get a list of all files in the folder"
"0","files <- dir(folder_path, full.names = TRUE)"
"0",""
"0","# Set a path to save the organized files"
"0","organized_data_path<-""/Users/irmakergin/Desktop/final-project-irmak-ergin/organized_data_sum"""
"0",""
"0",""
"0","# Find files by participant ID "
"0","for(part_id in participant_ids) {"
"0",""
"0","  # Match the slider files that involve the participant ID"
"0","  slider_pattern <- paste0(""slider_"", part_id, "".*\\.csv$"")"
"0","  "
"0","  # Match data (csv) files that start with the participant ID"
"0","  additional_csv_pattern <- paste0(""^"", part_id, ""_.*\\.csv$"")"
"0","  "
"0","  # Find slider files that match the pattern"
"0","  slider_matched_files <- files[str_detect(basename(files), slider_pattern)]"
"0","  "
"0","  # Find data CSV files that match the pattern"
"0","  additional_csv_matched_files <- files[str_detect(basename(files), "
"0","                                                   additional_csv_pattern)]"
"0","   "
"0","  # Create a directory for the current participant on the organized data path"
"0","  participant_folder <- file.path(organized_data_path, part_id)"
"0","  if(!dir.exists(participant_folder)) {"
"0","    dir.create(participant_folder, recursive = TRUE, showWarnings = TRUE)"
"0","  }"
"0","  "
"0","  # Create a subdirectory for slider files within the participant folder"
"0","  slider_folder <- file.path(participant_folder, paste0(""slider_"", part_id))"
"0","  if(!dir.exists(slider_folder)) {"
"0","    dir.create(slider_folder, recursive = TRUE, showWarnings = TRUE)"
"0","  }"
"0","  "
"0","  # Move slider matched files to the slider subfolder"
"0","  if(length(slider_matched_files) > 0) {"
"0","    for(file in slider_matched_files) {"
"0","      file_copy(file, file.path(slider_folder, basename(file)), overwrite = TRUE)"
"0","    }"
"0","  }"
"0","  "
"0","  # Move additional CSV matched files (experiment data) to the main participant folder "
"0","  #and rename the participant folders"
"0","  if(length(additional_csv_matched_files) > 0) {"
"0","  # loop to rename the file during the copy process"
"0","  for(file in additional_csv_matched_files) {"
"0","    # New filename with '_raw_data'"
"0","    new_name <- paste0(part_id, ""_raw_data.csv"")"
"0","    # Copy and rename the file to the new name in the participant folder"
"0","    file_copy(file, file.path(participant_folder, new_name), overwrite = TRUE)"
"0","  }"
"0","}"
"0","  # check"
"0","  if(length(slider_matched_files) > 0 || length(additional_csv_matched_files) > 0) {"
"0","    cat(""Files for participant ID '"", part_id, "
"0","        ""' have been organized successfully. Slider files in: "", slider_folder, "
"0","        "", other CSVs in: "", participant_folder, ""\n"")"
"0","  } else {"
"0","    cat(""No files found for participant ID '"", part_id, ""'.\n"")"
"0","  }"
"0","}"
"1","Files for participant ID '"
"1"," "
"1","p_1"
"1"," "
"1","' have been organized successfully. Slider files in: "
"1"," "
"1","/Users/irmakergin/Desktop/final-project-irmak-ergin/organized_data_sum/p_1/slider_p_1"
"1"," "
"1",", other CSVs in: "
"1"," "
"1","/Users/irmakergin/Desktop/final-project-irmak-ergin/organized_data_sum/p_1"
"1"," "
"1","
"
"1","Files for participant ID '"
"1"," "
"1","p_2"
"1"," "
"1","' have been organized successfully. Slider files in: "
"1"," "
"1","/Users/irmakergin/Desktop/final-project-irmak-ergin/organized_data_sum/p_2/slider_p_2"
"1"," "
"1",", other CSVs in: "
"1"," "
"1","/Users/irmakergin/Desktop/final-project-irmak-ergin/organized_data_sum/p_2"
"1"," "
"1","
"
"1","Files for participant ID '"
"1"," "
"1","p_3"
"1"," "
"1","' have been organized successfully. Slider files in: "
"1"," "
"1","/Users/irmakergin/Desktop/final-project-irmak-ergin/organized_data_sum/p_3/slider_p_3"
"1"," "
"1",", other CSVs in: "
"1"," "
"1","/Users/irmakergin/Desktop/final-project-irmak-ergin/organized_data_sum/p_3"
"1"," "
"1","
"
"0","# Put excel files (of digit in noise and digit span) in the organized data folder "
"0",""
"0","source_folder<-""/Users/irmakergin/Desktop/final-project-irmak-ergin/data_sum"""
"0","destination_folder<-""/Users/irmakergin/Desktop/final-project-irmak-ergin/organized_data_sum"""
"0",""
"0","# List all Excel files in the source folder"
"0","excel_files <- dir_ls(path = source_folder, glob = ""*.xlsx"")"
"0",""
"0","# Copy each Excel file to the destination folder- commented out to re-run"
"0","for (file_path in excel_files) {"
"0","dest_file_path <- file.path(destination_folder, path_file(file_path))"
"0","file_copy(file_path, dest_file_path)"
"0","#   "
"0"," Check"
"0","cat(""Copied:"", file_path, ""to"", dest_file_path, ""\n"")"
"0","}"
"0",""
"0","# Loop through each participant ID"
"0","for (part_id in participant_ids) {"
"0","  # Define the path to the participant's raw data CSV"
"0","  raw_data_path <- file.path(organized_data_path, "
"0","                             part_id, "
"0","                             paste0(part_id, ""_raw_data.csv""))"
"0"," # Read the CSV for each participant (if it exists)"
"0","  if (file.exists(raw_data_path)) {"
"0","  df.raw <- read_csv(raw_data_path) %>%"
"0","    filter(!wav_file %in% c(""Someday_trial_condition.wav"", "
"0","                            ""Someday_trial_condition-4x.wav"")) %>%"
"0","    mutate(index = row_number()) %>%"
"0","    select(index, participant, wav_file, old_name, segment_text, duration,"
"0","           `Summary.started` ,`Summary.stopped`,`Experimen_audio.started`, "
"0","           `textbox.text`) %>%"
"0","    group_by(wav_file) %>%"
"0","    summarise("
"0","      index = first(index), "
"0","      participant = first(participant), "
"0","      old_name = first(old_name),"
"0","      segment_text = first(segment_text),"
"0","      duration = first(duration),"
"0","      summary_start= first(Summary.started),"
"0","      summary_stop= first(Summary.stopped),"
"0","      textbox.text = first(textbox.text),"
"0","      .groups = 'drop'"
"0","    ) %>%"
"0","    arrange(index) %>%"
"0","    mutate(index = row_number()) "
"0","  "
"0","  # Fill NA values in participant_id column with part_id for participant p_1"
"0","    if (part_id == ""p_1"") {"
"0","      df.raw <- df.raw %>%"
"0","        mutate(participant = replace_na(participant, part_id))"
"0","    }"
"0",""
"0","   # Remove the extra last row from df.raw"
"0","    df.raw <- head(df.raw, n = -1)"
"0","    "
"0","  # Assign processed data of each participant to a new df"
"0","  assign(paste0(""df.raw.merged_"", part_id), df.raw, envir = .GlobalEnv)"
"0","  }"
"0","}"
"0","# Sanity check"
"0","# how many rows do we have- should be 150"
"0","nrow(df.raw.merged_p_3)"
"1","[1]"
"1"," 150"
"1","
"
